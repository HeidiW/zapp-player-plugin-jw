checkout:
  post:
    - git submodule sync --recursive
    - git submodule update --init --recursive

dependencies:
  cache_directories:
    - ~/.android
    - ~/android
  pre:
    - sudo rm -rf /usr/local/gradle-1.10/bin/gradle
#    - sudo add-apt-repository -y ppa:cwchien/gradle
#    - sudo apt-get update
#    - sudo apt-get install gradle-4.7
#    - gradle -v
    - echo y | android update sdk --no-ui --all --filter build-tools-25.4.0,android-25,build-tools-27.0.1,android-27,extra-android-m2repository,extra-android-support,extra-google-google_play_services,extra-google-m2repository
  override:
    - echo do nothing

test:
  override:
    - echo do nothing

deployment:
  production:
    tag: /.*/
    commands:
      - sudo chmod +x ./gradlew
      - ./gradlew :jwplayer-plugin-android:assembleRelease :jwplayer-plugin-android:bintrayUpload
  beta:
    branch: /.*/
    commands:
      - sudo chmod +x ./gradlew
      - ./gradlew :jwplayer-plugin-android:assembleRelease